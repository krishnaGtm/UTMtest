name: 1.0.$(Rev:r)
pr: 
  branches:
    include:
      - master
      - release
trigger: 
  branches:
    include:
      - '*' 
  paths:
    include:
      - Enza.UTM.SendResult/*

pool: 
  vmImage: 'vs2017-win2016'

variables: 
  Buildconfiguration: Release 
  platform: "AnyCPU"

steps:
  - task: NuGetCommand@2
    inputs:
      command: restore
      restoreSolution: '**/*.sln'
    displayName: 'Restore NuGet packages'

  - task: MSBuild@1
    inputs: 
      solution: '**\Enza.UTM.SendResult.csproj'
      configuration: $(BuildConfiguration)
      platform: $(Platform)

  - task: CopyFiles@2
    inputs:
      Contents: 'src\Enza.UTM.SendResult\bin\$(Buildconfiguration)\*'
      TargetFolder: '$(Build.ArtifactStagingDirectory)'
    displayName: 'Copy bin content'
    
  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: '$(Build.ArtifactStagingDirectory)'
      ArtifactName: 'utm-send-result'
      publishLocation: 'Container'
    displayName: 'Publish artifacts'
  
    